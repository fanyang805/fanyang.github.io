<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<title>Fan's site | Simulation of Multiple Robots in Warehouse</title>
<meta name="description" content="A simple, whitespace theme for academics. Based on [*folio](https://github.com/bogoli/-folio) design.
">

<!-- Open Graph -->


<!-- Bootstrap & MDB -->
<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet" integrity="sha512-MoRNloxbStBcD8z3M/2BmnT+rg4IsMxPkXaGh2zD6LGNNFE80W3onsAhRcMAMrSoyWL9xD7Ert0men7vR8LUZg==" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.1/css/mdb.min.css" integrity="sha512-RO38pBRxYH3SoOprtPTD86JFOclM51/XTIdEPh5j8sj4tp8jmQIx26twG52UaLi//hQldfrh7e51WzP9wuP32Q==" crossorigin="anonymous" />

<!-- Fonts & Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css"  integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.9.0/css/academicons.min.css" integrity="sha512-W4yqoT1+8NLkinBLBZko+dFB2ZbHsYLDdr50VElllRcNt2Q4/GSs6u71UHKxB7S6JEMCp5Ve4xjh3eGQl/HRvg==" crossorigin="anonymous">
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons">

<!-- Code Syntax Highlighting -->
<link rel="stylesheet" href="https://gitcdn.link/repo/jwarby/jekyll-pygments-themes/master/github.css" />

<!-- Styles -->
<!-- 
<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22></text></svg>">
 -->
<!-- <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22></text></svg>"> -->
<link rel="shortcut icon" href="/assets/img/favicon.ico">
<link rel="stylesheet" href="/assets/css/main.css">

<link rel="canonical" href="/projects/multi-robot-system/package-delivery/">

<!-- JQuery -->
<!-- jQuery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>


<!-- Theming-->

  <script src="/assets/js/theme.js"></script>
  <!-- Load DarkMode JS -->
<script src="/assets/js/dark_mode.js"></script>






    
<!-- MathJax -->
<script type="text/javascript">
  window.MathJax = {
    tex: {
      tags: 'ams'
    }
  };
</script>
<script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.1.2/es5/tex-mml-chtml.js"></script>
<script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>


  </head>

  <body class="fixed-top-nav sticky-bottom-footer">

    <!-- Header -->

    <header>

    <!-- Nav Bar -->
    <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top">
    <div class="container">
      
      <a class="navbar-brand title font-weight-lighter" href="/">
        <i class="fas fa-fan fa-spin"></i>
       Fan's site
      </a>
      
      <!-- Navbar Toggle -->
      <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar top-bar"></span>
        <span class="icon-bar middle-bar"></span>
        <span class="icon-bar bottom-bar"></span>
      </button>
      <div class="collapse navbar-collapse text-right" id="navbarNav">
        <ul class="navbar-nav ml-auto flex-nowrap">
          <!-- About -->
          <li class="nav-item ">
            <a class="nav-link" href="/">
              About
              
            </a>
          </li>
          
          <!-- Blog -->
          <li class="nav-item ">
            <a class="nav-link" href="/blog/">
              Blog 
              
            </a>
          </li>
          
          <!-- Other pages -->
          
          
          
          
          
          <li class="nav-item ">
              <a class="nav-link" href="/course-work/">
                Course Work
                
              </a>
          </li>
          
          
          
          
          
          <li class="nav-item ">
              <a class="nav-link" href="/projects/">
                Projects
                
              </a>
          </li>
          
          
          
          <li class="nav-item ">
              <a class="nav-link" href="/publications/">
                Publications
                
              </a>
          </li>
          
          
          
          <li class="nav-item ">
              <a class="nav-link" href="/research/">
                Research
                
              </a>
          </li>
          
          
          
          <li class="nav-item ">
              <a class="nav-link" href="/services/">
                Services
                
              </a>
          </li>
          
          
          
          
          
            <div class = "toggle-container">
              <a id = "light-toggle">
                  <i class="fas fa-moon"></i>
                  <i class="fas fa-sun"></i>
              </a>
            </div>
          
        </ul>
      </div>
    </div>
  </nav>

</header>


    <!-- Content -->

    <div class="container mt-5">
      <div class="post">

  <header class="post-header">
    <h1 class="post-title">Simulation of Multiple Robots in Warehouse</h1>
    <!-- <p class="post-description">Control and simulate multiple robots working in the open warehouse environment where other uncontrolled agents are working around. The robots are expected to visit the assigned tasks and avoid not only the obstacles that are represented by the occupancy map (e.g. shelf, wall) but also  the uncontrolled static and moving agents that are not represented by the occupancy map. 
</p> -->
  </header>

  <article>
    <p>This project designs a multi-robot system working in the warehouse facility or distribution center. The robots are moving around the facility to pick up packages from the loading stations and delivering them to unloading stations for storing or processing as shown in the figure below. It is assumed that the occupancy grid map that represents the free and occupied space is available. However there could be other uncontrolled moving agents working in the same environment and those agents cannot be included in the occupancy map. In this project, the robots working in the open environment are able to avoid both the obstacles represented in the occupancy grid map and the uncontrolled agents.</p>

<div class="row justify-content-center">
    <div class="col-9">
        <img class="img-fluid rounded z-depth-1" src="/projects/multi-robot-system/assets/img/warehouse.png" alt="" />
    </div>
</div>
<p><br /></p>
<h2 id="model-overview">Model Overview</h2>

<p>The multi-robot delivery system in this project is modeled in Simulink with the Stateflow charts and Robotics System Toolbox in matlab. The model is comprised of three parts: central scheduler, robot controller, plant.</p>

<p>In particular, the central scheduler sends the dilivery command to each robot. For example, when a robot has arrived at the assigned loading station and picked up the books, the central scheduler will send the message that asks the robot to visit the specific unloading station for the books. When robot finishes the delivery, it will ask robot to go back to the charging station or pick up other packages depending on the schedule designed in the Stateflow charts.</p>

<p>The robot controller will plan the path based on the delivery commands sent by the central scheduler. Then it computes the velocity commands for robot to follow the planned path. If robot have to avoid the uncontrolled agents, the robot controller should further adjust the velocity command based on the observation of the surrounding environment obtained from the sensors.</p>

<p>The plant module contains differential-drive robot model which simulates the execution of the velocity commands and return the ground-truth poses of the robot.</p>

<div class="row justify-content-center">
    <div class="col">
        <img class="img-fluid rounded z-depth-1" src="/projects/multi-robot-system/assets/img/model.png" alt="" />
    </div>
</div>
<p><br /></p>

<h2 id="collision-avoidance">Collision Avoidance</h2>

<p>In order to deliver the packages successfully, robots have to avoid any obstacle during the motion. We need to deal with three problems: (1) How to plan the collision-free path for robot to pick up package and deliver them to unloading station? (2) How to compute the velocity command such that the robot can follow the planned path? (3) How to avoid the unexpected obstacles that may appear when robot is moving? Three components are used in robot controller module to solve each of the three problems: <code class="language-plaintext highlighter-rouge">mobileRobotPRM</code> roadmap path planner, <code class="language-plaintext highlighter-rouge">Pure Pursuit</code> path tracking algorithm and <code class="language-plaintext highlighter-rouge">Vector Field Histogram</code> (VFH) block.</p>

<div class="row justify-content-center">
    <div class="col">
        <img class="img-fluid rounded z-depth-1" src="/projects/multi-robot-system/assets/img/robot_controller.png" alt="" />
    </div>
</div>
<p><br />
 It is assumed that we have a certain knowledge of the environment in the warehouse so that the occupancy grid map can be computed. The <code class="language-plaintext highlighter-rouge">mobileRobotPRM</code> function takes the occupancy grid map as the argument and computes a probabilistic roadmap (PRM) based on the free and occupied spaces. The PRM is a network graph of possible path. Given the start and goal location, PRM uses the network of connected nodes to find an obstacle-free path.</p>

<p>Ideally, robot can reach the goal position by simply following the planned path. However in realistic environment, robot’s motion is inherently uncertain. For example, the robot could drift off the path on the uneven road. Therefore it is necessary to use a path tracking algorithm, e.g., pure pursuit. The <code class="language-plaintext highlighter-rouge">pure pursuit</code> computes the velocity commands for following a path using a set of waypoints and current pose. The algorithm tries to move the robot from its current position to reach some look-ahead point in front of the robot.</p>

<p>With <code class="language-plaintext highlighter-rouge">mobileRobotPRM</code> and <code class="language-plaintext highlighter-rouge">pure pursuit</code>, robot is able to work in the environment where the only moving objects are robots. The problem happens when robot are working in the open environment where there are uncontrolled agents. Since those agents are not represented in the occupancy map, they may appear in the planned obstacle-free path for the robots. The <code class="language-plaintext highlighter-rouge">VFH</code> block is used to deal with this issue. The VFH check if the direction provided by the pure pursuit is obstacle-free based on the range-bearing sensor readings and compute steering direction closest to the target direction if there are obstacles in front of the robots. In particular, VFH computes polar density histogram to identify obstacle location and proximity. These histograms are then converted to binary histogram to indicate valid steering direction for the robot.</p>

<p>For example, the binary occupancy map of an warehouse environment is shown in the figure below. Note that an uncontrolled obstacle located in [35, 30] is not included in the map used to compute the PRM. Given the dilvery command fed by the central schedular, the PRM computes the obstacle-free path to the goal location. The robot follows the planned path based on the velocity commands sent by the pure pursuit controller. When robot is close to the uncontrolled obstacle, VFH adjust the steering direction by the sensor readings.</p>

<div class="row justify-content-center">
    <div class="col">
        <img class="img-fluid rounded z-depth-1" src="/projects/multi-robot-system/assets/img/single_robot.gif" alt="" />
    </div>
</div>
<p><br /></p>

<p>In addition to the static obstacle, the robot can also avoid the uncontrolled moving obstacle. As shown in the second example below, multiple robots are moving in the same environment and they don’t know the position of other robots until the sensors observe them. Besides the static obstacle, each robots should also avoid other robots which are not considered in computing the path by PRM.</p>

<div class="row justify-content-center">
    <div class="col">
        <img class="img-fluid rounded z-depth-1" src="/projects/multi-robot-system/assets/img/fullview.gif" alt="" />
    </div>
</div>
<p><br /></p>

<p>A local view on robot 2.</p>

<div class="row justify-content-center">
    <div class="col">
        <img class="img-fluid rounded z-depth-1" src="/projects/multi-robot-system/assets/img/view2.gif" alt="" />
    </div>
</div>
<p><br /></p>

<h2 id="discussion">Discussion</h2>

<p>In this project, we simulate a multi-robot system for the package delivery in the warehouse. Given the assigned packages, the robots visit loading stations and unloading stations with the collision avoidance. The collision avoidance scheme used in this project enable robots to avoid both the static and moving obstacles that are uncontrolled in the environment. Beside the indoor warehouse environment, the collision avoidance scheme may also applicable to the ourdoor application such as passenger delivery and last-mile delivery.</p>

<p>There are several remaining questions that are not discussed in this project. Although the robots are able to finish the delivery without the collision, if we care about the travel cost or the delivery time, the package assignment and path planning used in this project may not be the optimal especially in the high uncertain open environment. Therefore the task allocation and path planning under the uncertain are important in the multi-robot system. In fact, these are parts of the movitations of my research. I have published two ICRA papers that proposed algorithms to simultaneously compute the task allocation and path planning and the solution provide a probablistic guarantee on robot’s performance in each execution of the task. They are available to read on my publication page.</p>

  </article>

</div>

    </div>

    <!-- Footer -->

    
<footer class="sticky-bottom mt-5">
  <div class="container">
    &copy; Copyright 2021 Fan  Yang.
    
    
    
    Last updated: November 25, 2021.
    
  </div>
</footer>



  </body>

  <!-- Bootsrap & MDB scripts -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.4.4/umd/popper.min.js" integrity="sha512-eUQ9hGdLjBjY3F41CScH3UX+4JDSI9zXeroz7hJ+RteoCaY+GP/LDoM8AO+Pt+DRFw3nXqsjh9Zsts8hnYv8/A==" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha512-M5KW3ztuIICmVIhjSqXe01oV2bpe248gOxqmlcYrEzAvws7Pw3z6BK0iGbrwvdrUQUhi3eXgtxp5I8PDo9YfjQ==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.1/js/mdb.min.js" integrity="sha512-Mug9KHKmroQFMLm93zGrjhibM2z2Obg9l6qFG2qKjXEXkMp/VDkI4uju9m4QKPjWSwQ6O2qzZEnJDEeCw0Blcw==" crossorigin="anonymous"></script>

  
<!-- Mansory & imagesLoaded -->
<script defer src="https://unpkg.com/masonry-layout@4/dist/masonry.pkgd.min.js"></script>
<script defer src="https://unpkg.com/imagesloaded@4/imagesloaded.pkgd.min.js"></script>
<script defer src="/assets/js/mansory.js" type="text/javascript"></script>


  


<!-- Load Common JS -->
<script src="/assets/js/common.js"></script>


</html>
